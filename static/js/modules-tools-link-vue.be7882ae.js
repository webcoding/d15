(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["modules-tools-link-vue"],{"0ff4":function(e,t,a){"use strict";var r=a("21dc"),i=a.n(r);i.a},"166e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"fr link-parse"},[a("h4",[e._v("链接解析")]),e._v(" "),a("el-input",{attrs:{rows:9,type:"textarea",placeholder:"请输入内容"},model:{value:e.textarea,callback:function(t){e.textarea=t},expression:"textarea"}}),e._v(" "),a("p",[e._v("解析如下："+e._s(e.linkCheckTip))]),e._v(" "),a("div",{staticClass:"content"},[a("pre",{staticClass:"parse-code"},[e._v(e._s(e.parseTextarea))])])],1),e._v(" "),a("el-form",{ref:"form",staticClass:"pr",attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.qrcode,expression:"qrcode"}],staticClass:"qrcode"},[a("div",{staticClass:"output"},[a("div",{staticClass:"output-item"},[a("img",{attrs:{src:e.qrcode,width:"160",height:"100%",alt:""}})])])]),e._v(" "),a("el-form-item",[a("p",[e._v("\n        以下功能支持自动生成 "),a("b",[e._v("场景A")]),e._v(" -> "),a("b",[e._v("场景B")]),e._v(" 的跳转链接\n        "),a("b",[e._v(" 要使用spm配置")]),e._v(" "),a("a",{staticClass:"red",attrs:{href:"http://bi.doweidu.com/#/manage/spm?show_add=1&is_miniapp=1"}},[e._v("去新站点\n        ")])])]),e._v(" "),a("el-form-item",[a("el-radio-group",{model:{value:e.minitype,callback:function(t){e.minitype=t},expression:"minitype"}},[a("el-radio-button",{attrs:{label:"h5"}},[e._v("H5")]),e._v(" "),a("el-radio-button",{attrs:{label:"aliapp"}},[e._v("支付宝小程序")]),e._v(" "),a("el-radio-button",{attrs:{label:"wxapp"}},[e._v("微信小程序")]),e._v(" "),a("el-radio-button",{attrs:{label:"short"}},[e._v("短链接")])],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("fromApp"),expression:"show('fromApp')"}],attrs:{label:"h5"!==e.minitype?"在哪配置":"提示"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:"h5"===e.minitype,expression:"minitype === 'h5'"}]},[e._v("首页改版上线后启用")]),e._v(" "),a("el-select",{directives:[{name:"show",rawName:"v-show",value:"h5"!==e.minitype,expression:"minitype !== 'h5'"}],attrs:{placeholder:"请选择"},model:{value:e.form.fromAppValue,callback:function(t){e.$set(e.form,"fromAppValue",t)},expression:"form.fromAppValue"}},e._l(e.fromList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("toApp"),expression:"show('toApp')"}],attrs:{label:"跳转到哪里"}},[a("el-input",{staticClass:"input-with-select",attrs:{disabled:!!e.form.toAppId,placeholder:"请输入 appid=xxx"},model:{value:e.form.toAppIdString,callback:function(t){e.$set(e.form,"toAppIdString",t)},expression:"form.toAppIdString"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.form.toAppId,callback:function(t){e.$set(e.form,"toAppId",t)},expression:"form.toAppId"}},e._l(e.toList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("pathname"),expression:"show('pathname')"}],attrs:{label:"页面路径"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:""+e.pathnameTip},model:{value:e.form.pathname,callback:function(t){e.$set(e.form,"pathname",t)},expression:"form.pathname"}},[a("el-select",{attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:e.form.pageName,callback:function(t){e.$set(e.form,"pageName",t)},expression:"form.pageName"}},e._l(e.pageList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("pageQuery"),expression:"show('pageQuery')"}],attrs:{label:"页面参数"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"如需要参数，请输入页面参数 如 id=xxx topic_code=xxx"},model:{value:e.form.pageQueryString,callback:function(t){e.$set(e.form,"pageQueryString",t)},expression:"form.pageQueryString"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("httpsUrl"),expression:"show('httpsUrl')"}],attrs:{label:"https链接"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"如: https://topic.doweidu.com/?id=6633dc9c5148b8d7a5057bc85d80c922"},model:{value:e.form.httpsUrl,callback:function(t){e.$set(e.form,"httpsUrl",t)},expression:"form.httpsUrl"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("bizParams"),expression:"show('bizParams')"}],attrs:{label:"统计参数"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"请输入渠道统计参数 如 spm=xxx&channel_id=xxx"},model:{value:e.form.bizParamsString,callback:function(t){e.$set(e.form,"bizParamsString",t)},expression:"form.bizParamsString"}})],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.show("extraData"),expression:"show('extraData')"}],attrs:{label:"扩展参数"}},[a("el-input",{staticClass:"input",attrs:{placeholder:"其他小程序引流，可能需要扩展参数 extraData，格式同 spm=xxx&channel_id=xxx"},model:{value:e.form.extraDataString,callback:function(t){e.$set(e.form,"extraDataString",t)},expression:"form.extraDataString"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生成结果"}},[a("div",{staticClass:"output"},[a("div",{staticClass:"output-item"},[e._v(e._s(e.output))]),e._v(" "),a("div",{staticClass:"output-item",staticStyle:{"white-space":"pre",color:"red"},domProps:{innerHTML:e._s(e.form.tip)}})]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.show("shorUrl"),expression:"show('shorUrl')"}],staticClass:"output"},[a("el-button",{staticClass:"mtb10",attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("\n          使用短链接\n        ")]),e._v(" "),a("div",{staticClass:"output-item",attrs:{title:e.shortTargetUrl}},[e._v(e._s(e.shortUrl))])],1)])],1)],1)},i=[],l=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),n=(a("6b54"),a("6762"),a("2fdb"),a("28a5"),a("7514"),a("bd86")),s=a("bc3a"),o=a.n(s),p=a("75fc"),c=[{label:"首页 index",value:"index"},{label:"新专题 topic",value:"topic",type:"https"},{label:"老专题 zt2(废弃)",value:"zt2",disabled:!0},{label:"购物车 shopping-cart",value:"shopping-cart"},{label:"拼团详情 couple-detail",value:"couple-detail"},{label:"积分详情 point-detail",value:"point-detail"},{label:"单品详情 detail",value:"detail"},{label:"cps详情 detail2",value:"detail2"},{label:"拼团分享 couple-share",value:"couple-share"},{label:"五福专题 zt(已废弃)",value:"zt",disabled:!0},{label:"搜索结果页 couple-search-list",value:"couple-search-list"},{label:"商家主页 merchant",value:"merchant"},{label:"助力免单列表 zl-list",value:"zl-list"},{label:"抽奖团列表 lottery-list",value:"lottery-list"},{label:"个人中心 profile",value:"profile"},{label:"订单列表 order-list",value:"order-list"},{label:"订单详情 order-detail",value:"order-detail"},{label:"客服页 service",value:"service"}],u=[{label:"首页 index",value:"index"},{label:"城市选择 city",value:"city"}],h=[{label:"首页 index",value:"index"},{label:"城市选择 city",value:"city"},{label:"探店 old product",value:"product"},{label:"大家都在看 product-tab-list",value:"product-tab-list"},{label:"探店 shop",value:"shop"},{label:"店铺详情 shop-detail",value:"shop-detail"},{label:"文章 article",value:"article"},{label:"下载 download",value:"download"},{label:"商品详情 product-detail",value:"product-detail"},{label:"我的蜂蜜 honey-note",value:"honey-note"},{label:"邀请有礼 invite-register",value:"invite-register"},{label:"想去的店 collect-product",value:"collect-product"},{label:"商圈搜索 search-shop",value:"search-shop"},{label:"地图 map",value:"map"},{label:"文章搜索 search-article",value:"search-article"},{label:"分享美食体验 publish",value:"publish"},{label:"关于我们 about",value:"about"},{label:"登录 login",value:"login"},{label:"客服 service",value:"service"},{label:"个人中心 profile",value:"profile"},{label:"消息列表 message",value:"message"},{label:"消息 message-index",value:"message-index"},{label:"我的订单 order",value:"order"},{label:"订单详情 order-detail",value:"order-detail"},{label:"我的粉丝 follow",value:"follow"},{label:"全部评论 comments",value:"comments"},{label:"账号设置 setting",value:"setting"}],m=[{label:"单品详情 detail",value:"detail"}],d={label:"自定义(无数据默认跳首页)",value:""},b=[{label:"首页 index",value:"index"},{label:"新专题 topic",value:"topic",type:"https"}],v=[{label:"个人中心 profile",value:"profile"},{label:"订单列表 order-list",value:"order-list"},{label:"订单详情 order-detail",value:"order-detail"},{label:"客服页 service",value:"service"}],f={h5:[d].concat(b,[{label:"详情 detail",value:"detail"}],v),mini:[d].concat(b,[{label:"购物车 shopping-cart",value:"shopping-cart"},{label:"详情 detail",value:"detail"},{label:"普通品详情 detail2",value:"detail2"},{label:"通用 https 链接",value:"webview",type:"https",disabled:!0},{label:"五福专题 zt",value:"zt",disabled:!0}],v),hsq:[d].concat(Object(p["a"])(c)),iqg:Object(p["a"])(u),msf:Object(p["a"])(h),fyb:Object(p["a"])(m)},g=[{label:"自定义小程序",terminal:"other-mini",value:"",type:"mini",children:[d]}],y=[].concat(g,[{label:"hsq-拼团小程序",terminal:"hsq-couple",value:"2017112000051610",biz:"hsq",type:"mini",children:Object(p["a"])(f.mini)},{label:"hsq-积分小程序",terminal:"hsq-point",value:"2018051160096372",biz:"hsq",type:"mini",children:Object(p["a"])(f.mini)},{label:"hsq-芝麻信用小程序",terminal:"hsq-xy",value:"2018121062522053",biz:"hsq",type:"mini",children:Object(p["a"])(f.mini)},{label:"iqg-一元餐小程序",terminal:"iqg-yyc",value:"2018052860277142",biz:"iqg",type:"mini",disabled:!0,children:Object(p["a"])(f.mini)}]),w=[].concat(g,[{label:"hsq-拼团小程序",terminal:"hsq-wxapp",value:"wxa090d3923fde0d4b",biz:"hsq",type:"mini",children:Object(p["a"])(f.mini)},{label:"fyb-返一半小程序",terminal:"fyb-wxapp",value:"wxf5af2f07377df2b1",biz:"hsq",type:"mini",children:Object(p["a"])(f.mini)},{label:"iqg-砍价小程序",terminal:"iqg-wxapp",value:"wxa36b4671d95ba753",biz:"iqg",type:"mini",children:[].concat(Object(p["a"])(f.mini),[{label:"一元券 ticket",value:"ticket"},{label:"活动分类列表 activity-category",value:"activity-category"}])},{label:"msf-微信小程序",terminal:"msf-wxapp",value:"wxd01101d64405ab11",biz:"msf",type:"mini",children:[{label:"通用 https 链接",value:"web-view",type:"https"}]}]),x={short:{},h5:{toList:[{label:"h5-好食期",terminal:"h5-hsq",value:"https://m.haoshiqi.net",biz:"h5-hsq",type:"https",children:Object(p["a"])(f.hsq)},{label:"h5-爱抢购",terminal:"h5-iqg",value:"https://m.iqianggou.com",biz:"h5-iqg",type:"https",disabled:!0,children:Object(p["a"])(f.h5)},{label:"h5-觅食蜂",terminal:"h5-msf",value:"https://m.mishifeng.net",biz:"h5-msf",type:"https",children:[].concat(b,Object(p["a"])(f.msf))},{label:"h5-爱抢购商户",terminal:"h5-iqgsh",value:"https://stats-m.iqianggou.com",biz:"h5-iqgsh",type:"https",disabled:!0,children:Object(p["a"])(f.h5)},{label:"h5-返一半",terminal:"h5-fyb",value:"h5-fyb",biz:"h5-fyb",type:"https",disabled:!0,children:Object(p["a"])(f.h5)}]},aliapp:{fromList:[{label:"支付宝-生活号",terminal:"alipays",value:"alipays",type:"alipays"},{label:"支付宝-推广助手投放",terminal:"ssp",value:"ssp",type:"ssp"},{label:"支付宝-模板消息",terminal:"tplmsg",value:"tplmsg",type:"tplmsg"},{label:"支付宝-短信",terminal:"sms",value:"sms",type:"sms"}].concat(Object(p["a"])(y)),toList:Object(p["a"])(y)},wxapp:{fromList:[{label:"微信-模板消息",terminal:"tplmsg",value:"tplmsg",type:"tplmsg"},{label:"微信-微信推文",terminal:"tweet",value:"tweet",type:"tweet"},{label:"微信-广告投放",terminal:"ad",value:"ad",type:"ad"}].concat(Object(p["a"])(w)),toList:Object(p["a"])(w)}},O=(a("a481"),Object.prototype.hasOwnProperty);function U(e){return decodeURIComponent(e.replace(/\+/g," "))}function j(e){for(var t,a=/([^=?&]+)=?([^&]*)/g,r={};t=a.exec(e);r[U(t[1])]=U(t[2]));return r}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?",a=[];for(var r in e)O.call(e,r)&&![void 0,null,""].includes(e[r])&&a.push(encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return a.length?t+a.join("&"):""}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var z=a("85f2"),q=a.n(z);function S(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),q()(e,r.key,r)}}function P(e,t,a){return t&&S(e.prototype,t),a&&S(e,a),e}function A(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?A(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):A(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var C,N={base:{mini:function(e){return"".concat(e.pathname).concat(k(e.pageQuery))},https:function(e){var t=I({},j(e.webviewUrl),{},e.bizParams);return"".concat(e.webviewUrl).concat(k(t))},miniapp:function(e){var t=I({appid:e.appId},e.pageQuery,{},e.bizParams);return"miniapp://".concat(e.pathname).concat(k(t))},tplmsg:function(e){var t=I({},e.pageQuery,{},e.bizParams);return"".concat(e.pathname).concat(k(t))}},aliapp:{life:function(e){var t=I({},e.pageQuery,{},e.bizParams);return"".concat(e.pathname).concat(k(t))},sms:function(e){return"https://ds.alipay.com/?from=mobilecodec&scheme=".concat(encodeURIComponent(e.alipaysUrl))},alipays:function(e){var t={appId:e.appId,page:e.miniUrl,query:k(e.bizParams,"")};return"alipays://platformapi/startApp".concat(k(t))},ssp:function(e){var t={appId:e.appId,page:e.miniUrl,query:k(e.bizParams,"")};return"alipays://platformapi/startapp".concat(k(t))}},wxapp:{mp:function(e){var t=I({},e.pageQuery,{},e.bizParams);return"".concat(e.pathname).concat(k(t))},tweet:function(e){var t=e.pathname;t=t?"".concat(t,".html"):"";var a=I({},e.pageQuery,{},e.bizParams);return"".concat(t).concat(k(a))},ad:function(e){var t=e.pathname;t=t?"/".concat(t):"";var a=I({},e.pageQuery,{},e.bizParams);return"".concat(t).concat(k(a))}}},D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_(this,e),this.rules=I({},N.base,{},t),this.init(this.rules)}return P(e,[{key:"input",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=I({},e),a=t.pageQuery,r=void 0===a?{}:a,i=t.bizParams,l=void 0===i?{}:i;return"https"!==e.linkType&&e.webviewUrl&&(e.pageQuery=I({},r,{url:e.webviewUrl})),e.bizParams=l,this.data=I({},e),this}},{key:"next",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.rules[e];if(!e||!a)throw Error("function next error: you should input ".concat(e," & ").concat(a));return"https"!==e&&("mini"===e||this.data.miniUrl||this.mini(),"sms"!==e||this.data.alipaysUrl||this.alipays()),this.toString=function(){return a(t.data)},this.data["".concat(e,"Url")]=this.toString(),this}},{key:"init",value:function(e){var t=this;Object.keys(e).forEach((function(e){t[e]=function(t){return this.next(e,t)}}))}}]),e}();function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L=function(){},$={fromAppValue:"",toAppId:"",toAppIdString:"",pageName:"",pathname:"",httpsUrl:"",pageQueryString:"",bizParamsString:"",extraDataString:"",tip:""};function R(e){var t=/^(?:(?:https?):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?$/i;return!!t.test(e)}var E={data:function(){return{options:x.aliapp.toList,minitype:"h5",output:"",qrcode:"",shortUrl:"",shortTargetUrl:"",selectedOptions:[],form:Q({},$),textarea:""}},computed:{linkCheckTip:function(){return""},fromList:function(){return x[this.minitype].fromList},toList:function(){return x[this.minitype].toList},pathnameTip:function(){var e="xxx";return"h5"!==this.minitype&&(e="pages/xxx/xxx"),"请输入 ".concat(e,"，无数据默认跳首页")},pageList:function(){var e=this.form.toAppId,t=this.toList,a=void 0===t?[]:t,r=a.find((function(t){return t.value===e}))||{},i=r.children||[];return i},appData:function(){var e=this,t=this.minitype,a=this.form,r=this.fromList,i=void 0===r?[]:r,l=this.toList,n=void 0===l?[]:l,s=i.find((function(t){return t.value===e.form.fromAppValue}))||{},o=n.find((function(t){return t.value===e.form.toAppId}))||{},p=s.type,c=j(a.pageQueryString.trim()),u=j(a.bizParamsString.trim()),h=j(a.extraDataString.trim()),m=a.toAppId||(j(a.toAppIdString).appid||"").trim();s.type===o.type&&s.value!==o.value?p="miniapp":"h5"===t&&(p="https");var d={minitype:t,appId:m,pageQuery:c,bizParams:u,extraData:h,pageName:a.pageName,pathname:a.pathname,webviewUrl:a.httpsUrl,linkType:p,fromApp:s,toApp:o};return console.log(d),d},parseTextarea:function(){var e=this.textarea.trim()||"",t={};e&&(this.qrcode=e);var a=j(e);if(/^https:\/\/ds\.alipay\.com\//.test(e)){var r=a.scheme.split("?");a=j(r[1]),Object.assign(t,{type:"sms",desc:"适用于发送短信"})}else if(/^alipay/.test(e)){var i=e.split("?");a=j(i[1]),Object.assign(t,{type:"alipays",desc:"适用于唤醒支付宝内页面，支持小程序"})}else/^minitype/.test(e)&&Object.assign(t,{type:"minitype",desc:"适用于多维度小程序主体内向其他小程序跳转（包含同主体的）"});if(a.page){var l=a.page.split("?");if(t.pathname=l[0],l[0]){var n=j(l[1]);n.url&&(t.webviewUrl=n.url,delete n.url),t.pageQuery=k(n,"")}}return Object.assign(t,{appId:a.appId||a.appid,query:a.query}),"{}"===JSON.stringify(t)?"":JSON.stringify(t,null,2)}},watch:(C={},Object(n["a"])(C,"minitype",(function(e,t){e!==t&&(this.reset(),["aliapp","wxapp"].includes(e)&&(L=new D(N[e])))})),Object(n["a"])(C,"form.fromAppValue",(function(e,t){e!==t&&(this.form.tip="")})),Object(n["a"])(C,"form.toAppId",(function(e,t){e&&0!==e?"h5"!==this.minitype?this.form.toAppIdString="appid=".concat(e):this.form.toAppIdString="".concat(e):this.form.toAppIdString="",e!==t&&(this.form.pageName="")})),Object(n["a"])(C,"form.pageName",(function(e,t){var a="";if(e&&(a="h5"!==this.minitype?"pages/".concat(e,"/").concat(e):"https://m.haoshiqi.net"===this.form.toAppId&&"topic"!==e?"v2/".concat(e):"".concat(e)),e!==t){var r=Q({},this.form,{pathname:a});"topic"===e&&(r.pageQueryString=$.pageQueryString),"topic"===t&&(r.httpsUrl=$.httpsUrl),this.form=r}})),Object(n["a"])(C,"appData",(function(e,t){this.qrcode="",this.shortUrl="",this.form.tip="",this.shortTargetUrl="",e!==t&&(this.output=this.getOutput(),this.qrcode=this.getQrcode())})),C),created:function(){L=new D(N[this.minitype])},methods:{reset:function(){this.form=Q({},$)},show:function(e){var t=this.minitype,a=this.form,r=!1;switch(e){case"fromApp":r=!0;break;case"pathname":r=!0;break;case"toApp":r=!0;break;case"httpsUrl":r="topic"===a.pageName||"short"===t;break;case"pageQuery":r="topic"!==a.pageName;break;case"bizParams":r=!0;break;case"extraData":""===a.fromAppValue&&(r=!0),"h5"===t&&(r=!1);break;case"shorUrl":"short"===t?r=!0:"h5"===t?("topic"===a.pageName&&R(a.httpsUrl)&&(r=!0),a.pathname&&"topic"!==a.pageName&&(r=!0)):"h5"!==t&&("wxapp"===t&&"topic"===a.pageName&&a.httpsUrl?r=!0:"aliapp"===t&&"sms"===this.appData.linkType&&(r=!0));break;default:}return"short"!==t||["httpsUrl","shorUrl"].includes(e)||(r=!1),r},getOutput:function(e){var t=this.appData,a=t.appId,r=t.fromApp,i=t.toApp,l=t.linkType,n=t.pathname,s=t.pageQuery,o=t.bizParams,p=t.extraData,c=t.webviewUrl;if("h5"===this.minitype){var u=Q({},s,{},o),h=i.value||"",m=n;"topic"===n&&(h=c,m=""),m=m?"/".concat(m):"";var d="".concat(h).concat(m).concat(k(u));return this.$emit("resultUrl",{errno:0,errmsg:"这是 H5 链接",data:Q({},t,{output:d})}),d}if("short"===this.minitype){var b="".concat(c);return this.$emit("resultUrl",{errno:0,errmsg:"这是短链接",data:Q({},t,{output:b})}),b}if("sms"===l&&(this.form.tip="短信内限制必须使用http协议"),"other-mini"===r.terminal){var v="".concat(n).concat(k(s))||"无",f="".concat(k(p,""))||"无";this.form.tip="配置后将以下数据提供给需求方\n{\n    appId: ".concat(a||"必须配置",",\n    path: ").concat(v,",\n    extraData: ").concat(f,"\n  }\n  ")}if(i.value&&r.value===i.value)return this.$emit("resultUrl",{errno:2,errmsg:"这里请选择 H5 类型生成链接",data:{}}),"这里请选择 H5 类型生成链接";if(!l||"https"!==l&&"mini"!==r.type&&!a)return this.$emit("resultUrl",{errno:1,errmsg:"不支持此类型",data:{}}),"";e&&(t.webviewUrl=e);var g=L.input(t)[l]().toString();return"wxapp"===this.minitype&&g.length>100&&(this.form.tip="链接总长 ".concat(g.length," 超过 100，请使用短链接优化")),this.$emit("resultUrl",{errno:0,errmsg:"",data:Q({},t,{output:g})}),g},getQrcode:function(){var e=this.appData,t=e.minitype,a=e.appId,r=e.linkType;if("wxapp"!==t&&a){var i=["alipays","sms","miniapp","ssp","tplmsg","mini"].includes(r);if(i){var l=L.input(e).alipays().toString();if(!l)return;var n="https://api.v3.iqianggou.com/api/common/qrcode?content=";return"".concat(n).concat(encodeURIComponent(l))}}},handleChange:function(e){console.log(e)},fetchShortUrl:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,r,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:if(R(t)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,o()({method:"get",url:"https://dwdurl.cn/yourls-api.php",params:{signature:"468b913cc6",action:"shorturl",format:"json",url:encodeURIComponent(t)}});case 6:return a=e.sent,console.warn("短链接",a),r=a||{},i=r.data,l=void 0===i?{}:i,e.abrupt("return",l.shorturl);case 10:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onSubmit:function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.minitype,a=this.form,"h5"!==t||!a.pathname){e.next=6;break}return this.shortTargetUrl=this.output,e.next=5,this.fetchShortUrl(this.shortTargetUrl);case 5:this.shortUrl=e.sent;case 6:if("short"!==t||!a.httpsUrl){e.next=11;break}return this.shortTargetUrl=a.httpsUrl,e.next=10,this.fetchShortUrl(this.shortTargetUrl);case 10:this.shortUrl=e.sent;case 11:if("h5"===t){e.next=25;break}if("wxapp"!==t||"topic"!==a.pageName||!a.httpsUrl){e.next=20;break}return this.shortTargetUrl=a.httpsUrl,e.next=16,this.fetchShortUrl(this.shortTargetUrl);case 16:r=e.sent,this.shortUrl=this.getOutput(r),e.next=25;break;case 20:if("aliapp"!==t||"sms"!==this.appData.linkType){e.next=25;break}return this.shortTargetUrl=this.output,e.next=24,this.fetchShortUrl(this.shortTargetUrl);case 24:this.shortUrl=e.sent;case 25:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onCancel:function(){this.$message({message:"reset!",type:"warning"})},hideTip:function(){}}},V=E,H=(a("0ff4"),a("f179"),a("2877")),J=Object(H["a"])(V,r,i,!1,null,"7755bd54",null);t["default"]=J.exports},"21dc":function(e,t,a){},4038:function(e,t,a){},7514:function(e,t,a){e.exports=a("9b85")(362)},f179:function(e,t,a){"use strict";var r=a("4038"),i=a.n(r);i.a}}]);